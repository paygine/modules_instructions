Модуль интеграции платежной системы Paygine с CMS 1C-BITRIX
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

После регистрации в системе Paygine необходимо получить следующие сведения:

1. Sector - идентификатор Торговца в Процессинговом центре
2. Пароль - для формирования цифровой подписи

Порядок установки модуля:

1. Скопируйте папку paygine в каталог (на сайте) .../bitrix/modules/sale/payment/
   Будьте внимательны - в исходной папке находится файл, имя которого начинается с точки, поэтому он может быть скрытым - включите отображение скрытых файлов на вашем компьютере.
2. Разместите файл paygine-callback.php из папки paygine в любое место сайта (доступное извне, например в корневой каталог сайта)
3. Разместите файл paygine-redirect.php из папки paygine в любое место сайта
   (доступное извне, например в корневой каталог сайта)
4. Перейдите на сайт, войдите на вкладку «администрирование»
5. Создайте страницу с текстом об успешной оплате и благодарностью за покупку
6. Создайте страницу с текстом об ошибке при оплате и с предложениями связаться
   с менеджером магазина
7. Нажмите кнопку «Добавить платежную систему» (см. рис. add-payment-system.png)
8. В поле «Название» впишите «Paygine», установите галочку «Активность», введите
   произвольное описание системы для клиентов (см. рис. apply-payment-system.png).
   Кроме того, можно добавить прилагаемый логотип системы (файл logo.png)
9. Нажмите кнопку «Применить»
10. Перейдите на закладку «Физическое лицо»
11. Установите флажок «Применять для данного типа плательщика»
12. В поле «Название» впишите «Paygine»
13. В поле «Обработчик» из списка выберите «Paygine»
    (см. рис. prop-payment-system.png)
14. Заполните поля обработчика:
    a) «Sector» и «Пароль» значениями, полученными в Paygine
    b) В поле «Тестовый режим» введите 1, если хотите использовать тестовый
       режим работы или 0 - если нет
    c) В поле «URL переадресации» введите адрес файла переадресации,
       полученный в шаге 3 (например, http://мой-магазин.ru/paygine-redirect.php)
    d) В поле «URL при успешной оплате» введите адрес страницы, полученный
       в шаге 5
    e) В поле «URL при неоплате» введите адрес страницы, полученный в шаге 6
    f) В поле «Режим двустадийной оплаты» введите 1, если хотите использовать
       режим двустадиной оплаты или 0 - если нет
    g) Поля  «Передавать данные на свою ККТ» и «Код ставки НДС для ККТ»
       при работе со своим ККТ
15. Нажмите кнопку «Применить»
16. Перейдите на закладку «Юридическое лицо»
17. Повторите все действия, как с закладкой «Физическое лицо» (п.11-15)
18. Нажмите кнопку «Сохранить»
19. В личном кабинете Paygine укажите в качестве адреса для уведомлений
    URL файла, полученный в шаге 2 (например, http://мой-магазин.ru/paygine-callback.php)


~~~~~~~~~~~
FAQ
~~~~~~~~~~~

При возникновении проблем с настройкой и ошибок вида "Undefined variable/index ..." убедитесь, что при установке скрытые файлы модуля (имя которых начинается с точки) были перенесены.

Фискальные позиции не передаются
	- убедиться, что установлен новый модуль из гитхаба (https://github.com/paygine/). Если переустановить модуль самостоятельно не удается, обратиться в поддержку с предоставлением доступа к сайту (админка, ftp/ssh)
	- проверить настройку передачи данных на ККТ (при наличии), должно быть включено
	- Код ставки НДС для ККТ от 1 до 6
	- Если ничего не помогло, обратиться в поддержку, предоставив доступ к сайту (админка, ftp/ssh)
 
Не работает оплата - регистрация заказа не прошла
	- убедиться, что установлен новый модуль из гитхаба (https://github.com/paygine/). Если переустановить модуль самостоятельно не удается, обратиться в поддержку с предоставлением доступа к сайту (админка, ftp/ssh)
	- проверить номер сектора
	- проверить пароль
	- убедиться, что модуль работает в соответствующем режиме (боевой/тестовый), пароль для тестового режима по-умолчанию "test"
	- проверить настройку передачи данных на ККТ (при наличии). Если чеки формирует Paygine, значение = 1, если используется фискализация на собственной кассе, значение = 0
	- Код ставки НДС для ККТ от 1 до 6
	- Если ничего не помогло, обратиться в поддержку, предоставив доступ к сайту (админка, ftp/ssh)
	
Не работает оплата - заказ зарегистрирован в ЛК paygine
	- убедиться, что установлен новый модуль из гитхаба (https://github.com/paygine/). Если переустановить модуль самостоятельно не удается, обратиться в поддержку с предоставлением доступа к сайту (админка, ftp/ssh)
	- проверить redirect url в настройках (при наличии)
	- убедиться, что стадийность в настройках корректная
	- Если ничего не помогло, обратиться в поддержку, предоставив доступ к сайту (админка, ftp/ssh)